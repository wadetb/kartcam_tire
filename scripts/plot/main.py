import matplotlib.pyplot as plt
import numpy as np

log = '''
00> [00:01:06.212,432] <inf> packet: dps368.hpa 66211 64 0.010000 FFB848D6FFB9CCFFB89EFFB92480FFB9E0FFB8B0802CFFB9E0FFB8B080FFB9E08080FFB890FFB9E080FFB8904CFFB9F2FFB930FFB85480B260
00> [00:01:06.212,585] <inf> packet: dps368.temp 66211 8 0.001000 FFE0398175
00> [00:01:06.247,314] <inf> packet: lis3dhtr.accel.x 66246 100 1.000000 FF7EE47C808480808080807C8084807C848080808080807C8480807C847C84
00> [00:01:06.248,046] <inf> packet: lis3dhtr.accel.y 66246 100 1.000000 FF7F1480848080807C8080808480808080847C8080808080807C80847C7C84
00> [00:01:06.248,809] <inf> packet: lis3dhtr.accel.z 66246 100 1.000000 FF83B48480807C80808080848080807C8080848080807C847C808084847C7C
00> [00:01:06.634,277] <inf> packet: dps368.hpa 66633 64 0.010000 FFB9D81AFFB832FFB946FFB9EEFFB89EFFB9CC8080FFB780FFB848C2FFB952FFB8AAFFB9DA801AFFB8AAFFBA94FFB88680F62EFFB9D88080
00> --- 3 messages dropped ---
00> [00:01:06.634,429] <inf> packet: dps368.temp 66633 8 0.001000 FFE020917E
00> [00:01:06.853,393] <inf> packet: lis3dhtr.accel.x 66852 100 1.000000 FF7EE47C847C80808084847C847C847C7C8480807C80848080807C8084808080
00> [00:01:06.854,156] <inf> packet: lis3dhtr.accel.y 66852 100 1.000000 FF7F1880807C7C7C807C8484808080887C888080807C807C847C84807C7C8488
00> [00:01:06.854,888] <inf> packet: lis3dhtr.accel.z 66852 100 1.000000 FF83B48084808084807C807C807C8084808080808480807C8080848080808080
00> [00:01:07.056,549] <inf> packet: dps368.hpa 67055 64 0.010000 FFB972565EFFB8A0FFB9CEFFB8A0FFB9CEFFB8A0FFB9CEFFB88EFFB9E0FFB958B4D4FFB88E80A2FFB9DA80FFBA72FFB932FFB856D4FFB9DA80FFB952FFB886
00> [00:01:07.056,732] <inf> packet: dps368.temp 67055 8 0.001000 FFE02396787E
00> --- 2 messages dropped ---
00> [00:01:07.459,472] <inf> packet: lis3dhtr.accel.x 67458 100 1.000000 FF7EE4808080808080848080807C807C80808084807C808084808080847C7C8084
00> [00:01:07.460,235] <inf> packet: lis3dhtr.accel.y 67458 100 1.000000 FF7F147C8480847C7C808084847C8080847C8080808480808080808080807C8084
00> [00:01:07.461,029] <inf> packet: lis3dhtr.accel.z 67458 100 1.000000 FF83B87C80847C8480807C80807C8480808084807C847C84807C808080807C8480
00> [00:01:07.478,790] <inf> packet: dps368.hpa 67477 64 0.010000 FFB9D8FFB952FFB9D8FFB952FFB9D8FFB78AFFB94C8080FFB9F4FFB96EFFB8C6FFB94CFFB9F4FFB864FFB9E8FFB8BA6EFFB9E8FFB940FFB8BAFFB9E8728080801A
00> [00:01:07.478,942] <inf> packet: dps368.temp 67477 8 0.001000 FFE053716D
00> [00:01:07.900,787] <inf> packet: dps368.hpa 67899 64 0.010000 FFB9DA8080FFB914D4FFB8C0FFB9F080FFB8C0FFB9F080FFB8AAFFB9DAFFB9324C1C3CC4FFB932B02CD4A280E4FFB898F6
00> --- 3 messages dropped ---
00> [00:01:07.900,970] <inf> packet: dps368.temp 67899 8 0.001000 FFE04D649395
00> [00:01:08.065,582] <inf> packet: lis3dhtr.accel.x 68064 100 1.000000 FF7EE48080808080847C7C80847C80808080808480808080847C80847C80807C
00> [00:01:08.066,345] <inf> packet: lis3dhtr.accel.y 68064 100 1.000000 FF7F1C7C84807C808080807C847C808080847C847C8480808080807C80807C84
00> [00:01:08.067,077] <inf> packet: lis3dhtr.accel.z 68064 100 1.000000 FF83B48480847C8080807C848080807C80848080807C80808480807C84807C80
00> [00:01:08.323,028] <inf> packet: dps368.hpa 68321 64 0.010000 FFB8CAFFB972FFB8A8A2FFB9F880FFB8CAFFB95062FFBAE8FFB9DAFFB8AA6080FFB9DAFFB856FFB9C8FFB920FFB9C8FFB920FFB88AFFB9C8FFB89A80ACFFB96EFFB9F4
00> [00:01:08.323,211] <inf> packet: dps368.temp 68321 8 0.001000 FFE0316BB7
00> [00:01:08.369,354] <inf> packet: lis3dhtr.accel.y 68367 100 1.000000 FF7F14847C847C80808080808080808084807C808084807C8084807C8080847C
00> --- 1 messages dropped ---
00> [00:01:08.370,117] <inf> packet: lis3dhtr.accel.z 68367 100 1.000000 FF83B880807884847C808084807C80808080847C808080847C84807C807C8084
00> [00:01:08.671,661] <inf> packet: lis3dhtr.accel.x 68670 100 1.000000 FF7EE48084807C7C848080808084807C807C84808080807C84807C80847C808480
00> [00:01:08.672,454] <inf> packet: lis3dhtr.accel.y 68670 100 1.000000 FF7F1480808080848080807C8080808080808080847C808080847C847C80808480
00> [00:01:08.673,217] <inf> packet: lis3dhtr.accel.z 68670 100 1.000000 FF83B880807C8480807C808080808484807C807C808080807C80808480847C8080
00> [00:01:08.745,086] <inf> packet: dps368.hpa 68743 64 0.010000 FFBA8CFFB870FFB94CA280FFB864FFB90CFFB9E88080FFB8B880805CFFB9D45EFFB89480FFB9C480FFB894FFB9F490FFB870FFB94CA2FFB9F4
00> [00:01:08.745,239] <inf> packet: dps368.temp 68743 8 0.001000 FFE04352BE
00> [00:01:08.975,494] <inf> packet: lis3dhtr.accel.y 68973 100 1.000000 FF7F1C7C808084807C8080807C808080808080808084807C808080847C808084
00> --- 1 messages dropped ---
00> [00:01:08.976,257] <inf> packet: lis3dhtr.accel.z 68973 100 1.000000 FF83AC808880808084808080847C807C8080808080808080808080847C847C80
00> [00:01:09.167,175] <inf> packet: dps368.hpa 69166 64 0.010000 FFB9E4FFB94CFFB8A2A480FFB96EFFB870FFB94CFFB84EF86480602AD680FFB952FFB88AFFB91CB2FFB8A6FFB9F6FFB8C8808080FFB960
00> [00:01:09.167,358] <inf> packet: dps368.temp 69166 8 0.001000 FFE0535EA596
00> [00:01:09.277,801] <inf> packet: lis3dhtr.accel.x 69277 100 1.000000 FF7EE480807C847C80847C847C80847C80848084807C8080807C808080808480
00> [00:01:09.278,564] <inf> packet: lis3dhtr.accel.y 69277 100 1.000000 FF7F147C80847C848080808080848080807C847C847C84807C80887C7C808084
00> [00:01:09.279,327] <inf> packet: lis3dhtr.accel.z 69277 100 1.000000 FF83B87C8080847C80808080847C8080808084807C808080808484807C847C7C
00> [00:01:09.581,634] <inf> packet: lis3dhtr.accel.y 69580 100 1.000000 FF7F18808080807C8080848080807C887480848488AC787C74807C6C78847090
00> --- 1 messages dropped ---
00> [00:01:09.582,397] <inf> packet: lis3dhtr.accel.z 69580 100 1.000000 FF83B8808080807C80847C808480807C9474708484847474887C9084807C9C64
00> [00:01:09.589,324] <inf> packet: dps368.hpa 69588 64 0.010000 FFBA08FFB92CFFB862FFBA08FFB8D8FFB980A2FFB8DCFFBA1EFFB930B44CFFBA0CFFB8DCFFBA0CFFB97A5EFFB87CFFBA00FFB87CD6FFB97A2C78FFB9F880B4
00> [00:01:09.589,477] <inf> packet: dps368.temp 69588 8 0.001000 FFE0717276
00> [00:01:09.883,911] <inf> packet: lis3dhtr.accel.x 69883 100 1.000000 FF7ED09880807C64B0A43444B09C7878788488848C84807C84908488888C847454
00> [00:01:09.884,735] <inf> packet: lis3dhtr.accel.y 69883 100 1.000000 FF7F289C847C78E85844FF7EA4C4B0947070888880808480747C7C848080808C807488
00> [00:01:09.885,528] <inf> packet: lis3dhtr.accel.z 69883 100 1.000000 FF83B874849490E0342050AC9C7C7C8C8480808C90808488887880848488888844
00> [00:01:10.188,598] <inf> packet: lis3dhtr.accel.z 70186 100 1.000000 FF83F484948074748880889090848480887C7878707C7880707074685C7064FF83F0
00> --- 4 messages dropped ---
00> [00:01:10.433,288] <inf> packet: dps368.hpa 70432 64 0.010000 FFBA00FFB8B0ACFFB964FFB888FFBA0CFFB888FFBA0CFFB8BC4C6CFFB9F8FFB91E2C2AD6805EB42CF6FFB7BEFFB88880FFB9300C84
00> [00:01:10.433,441] <inf> packet: dps368.temp 70432 8 0.001000 FFE07168985B
00> [00:01:10.490,173] <inf> packet: lis3dhtr.accel.x 70489 100 1.000000 FF7F58848888848080948C94988C84787C8C7C788898908C7C947C70607470FF7F10
00> [00:01:10.490,936] <inf> packet: lis3dhtr.accel.y 70489 100 1.000000 FF7EF08C8C909090848C888C8078645C54686468808C9C949C889C908C807468
00> [00:01:10.491,821] <inf> packet: lis3dhtr.accel.z 70489 100 1.000000 FF83205460504C60686C90A8B8C4DCFF83B4FF845CFF84F4F4C8A0987C84988C603C20041410
00> [00:01:10.794,158] <inf> packet: lis3dhtr.accel.y 70792 100 1.000000 FF7F107C70747884787C788884948484848880807C947088746C5C64747074FF7F10
00> --- 1 messages dropped ---
00> [00:01:10.794,982] <inf> packet: lis3dhtr.accel.z 70792 100 1.000000 FF83B838383C4054506C5854444C68A8E8ECE8ECF0FF8420F0E0DCCCACB480645CFF83F0
00> [00:01:10.855,194] <inf> packet: dps368.hpa 70854 64 0.010000 FFB946FFB89E4CD60A80FFB9EEFFB7BAFFB92C802CD4800A4EFFB922FFB878D6802AFFBAB6FFB8ACFFB9FEFFB8C2A08080
00> [00:01:10.855,346] <inf> packet: dps368.temp 70854 8 0.001000 FFE06C729B
00> [00:01:11.096,527] <inf> packet: lis3dhtr.accel.x 71095 100 1.000000 307474786C68847C7C84907888848C8C8C8C847C787C707C7C888874786CFF7EE4
00> [00:01:11.097,351] <inf> packet: lis3dhtr.accel.y 71095 100 1.000000 FF7E8084888C8C8894807C809098888C8884847C7C7070605868748C8878746CFF7F18
00> [00:01:11.098,175] <inf> packet: lis3dhtr.accel.z 71095 100 1.000000 FF85444C4C240C04143054607494605C5C849CB4BCD0C8C8BCC4B4ACA0988C94FF83B4
00> [00:01:11.400,512] <inf> packet: lis3dhtr.accel.y 71398 100 1.000000 FF7E347874909C987C7C84807C74889C8C747C7880848090948C88888068705C
00> --- 3 messages dropped ---
00> [00:01:11.401,306] <inf> packet: lis3dhtr.accel.z 71398 100 1.000000 FF84F4685C68846C4C604C183044545C64709CB8AC8C84907484AC808C607CFF84D0
00> [00:01:11.699,310] <inf> packet: dps368.hpa 71698 64 0.010000 FFB8F2FFB9F6FFB8C8805EFFB7AAFFB94EFFB8C88034D60AFFB92680FFB87CD62A6EFFB914FFB86AFFB9142CD4D4FFB84AFCFFB9F4
00> [00:01:11.699,493] <inf> packet: dps368.temp 71698 8 0.001000 FFE0568D6987
00> [00:01:11.702,850] <inf> packet: lis3dhtr.accel.x 71702 100 1.000000 FF7F1C8C7884787064808C8078747884848C8888808888908480887C808080C0
00> [00:01:11.703,613] <inf> packet: lis3dhtr.accel.y 71702 100 1.000000 FF7E908488786C606078887078848484848C80808484848C8884848C9088844C
00> [00:01:11.704,406] <inf> packet: lis3dhtr.accel.z 71702 100 1.000000 FF83888CB4988C8C887C5838508C8078745454708C94A0A0989C88887C6460FF84D0
00> [00:01:12.007,507] <inf> packet: lis3dhtr.accel.z 72005 100 1.000000 FF8328889CB098908888747C84A8A898B084706C6040785468846C7C78848CFF84D0
00> --- 2 messages dropped ---
00> [00:01:12.121,368] <inf> packet: dps368.hpa 72120 64 0.010000 FFB9F4FFB84EFFBA04FFB87080B2FFB9DE80FFBC2CB20AFFBB62FFBA86FFBB405AFFBBB2FFBAC65EFFBB3C80FFB9FCFFBC9EFFBBE2FFBAC45EFFBBB06E
00> [00:01:12.121,520] <inf> packet: dps368.temp 72120 8 0.001000 FFE04CA87C
00> [00:01:12.309,020] <inf> packet: lis3dhtr.accel.x 72308 100 1.000000 FF7F54808C9088807C6C606480645C64847C9490908C949094A0888C78807888
00> [00:01:12.309,783] <inf> packet: lis3dhtr.accel.y 72308 100 1.000000 FF7EA478747C80907C807470805C6470909C9C9C948480787C7C7C8C8C80882C
00> [00:01:12.310,668] <inf> packet: lis3dhtr.accel.z 72308 100 1.000000 FF83887C7C6868545C7088AC80B8E8D0E8C8B0A8887C80602C00FF83A4FF831C0C2C3CFF84D0
00> [00:01:12.543,823] <inf> packet: dps368.temp 72542 8 0.001000 FFE096A48BA1
00> --- 1 messages dropped ---
00> [00:01:12.612,182] <inf> packet: lis3dhtr.accel.x 72611 100 1.000000 FF7F246C6C64707078847C8488888C887C84847C7C8088888888808890908CBC
00> [00:01:12.612,945] <inf> packet: lis3dhtr.accel.y 72611 100 1.000000 FF7EC884846860606C7C888C8C8480807C746C707C7C84888C8C7C7C88949848
00> [00:01:12.613,830] <inf> packet: lis3dhtr.accel.z 72611 100 1.000000 FF8198ACC4B4C0F4FF8384FF841CFF84A0F0CCA894807458544848341C201C24242C40445CFF84D0
00> [00:01:12.915,313] <inf> packet: lis3dhtr.accel.x 72914 100 1.000000 FF7F4888807080786C6860585C6C5880807884847C949094901C6CE0E06CBCD4
00> [00:01:12.916,168] <inf> packet: lis3dhtr.accel.y 72914 100 1.000000 FF7ECC9494808878686068687070748484787C746C7880848404FF7D30FF7E0090ECB82C
00> [00:01:12.917,144] <inf> packet: lis3dhtr.accel.z 72914 100 1.000000 FF81B894A0ACB4B0B0C8E0ECE8ECC4B4A88C78785C48383018FF8468FF8630FF839CFF82F0FF823050FF84D0
00> [00:01:13.219,421] <inf> packet: lis3dhtr.accel.y 73217 100 1.000000 FF7EB4A09088787C80706C6460585C606C74808C9490908C90948C9090949428
00> --- 3 messages dropped ---
00> [00:01:13.220,214] <inf> packet: lis3dhtr.accel.z 73217 100 1.000000 FF81ECA094BCD8D4D4D0B4908894A4A0ACA08C6C543C444C4854585C646468FF84D0
00> [00:01:13.387,756] <inf> packet: dps368.hpa 73386 64 0.010000 FFBA56FFBB74FFBAAA2C807A8080FFB9CAFFB922FFBA50FFBB0AFFBA508AB2FFBB14FFBA5AFFB9B2FFBA5A8080FFBC20FFBB56FFBA48F6FFBCB8FFB96E
00> [00:01:13.387,908] <inf> packet: dps368.temp 73386 8 0.001000 FFE0C98C6A
00> [00:01:13.521,697] <inf> packet: lis3dhtr.accel.x 73520 100 1.000000 FF7F14807C7C78807C787468848C889088807488848C9484808C80807C8080BC
00> [00:01:13.522,491] <inf> packet: lis3dhtr.accel.y 73520 100 1.000000 FF7ED888888070604850546078949C90887C7C8474808C8090907C9488948450
00> [00:01:13.523,498] <inf> packet: lis3dhtr.accel.z 73520 100 1.000000 FF829C6878705890C4F0FF83B0FF8460FF850CF8C0906C64402C0CFF8410FF8384FF83001C2C4840507C8CFF84D0
00> [00:01:13.810,058] <inf> packet: dps368.temp 73808 8 0.001000 FFE0CA8084A9
00> --- 1 messages dropped ---
00> [00:01:13.825,012] <inf> packet: lis3dhtr.accel.x 73824 100 1.000000 FF7F2070788C807C8C888880787C7884847C8C78909074908C8C888474807C94
00> [00:01:13.825,775] <inf> packet: lis3dhtr.accel.y 73824 100 1.000000 FF7EA480888C7C707464685C646C7884808494889C9880889490949084889410
00> [00:01:13.826,568] <inf> packet: lis3dhtr.accel.z 73824 100 1.000000 FF8248C4E8CCE4DCCCC8D8D4C49C8054342C241C1410202844404040587478FF84D0
00> [00:01:14.128,082] <inf> packet: lis3dhtr.accel.x 74127 100 1.000000 FF7F3074787C889C80908C7C787078747884847C8088848088B46488847C70A4
00> [00:01:14.128,875] <inf> packet: lis3dhtr.accel.y 74127 100 1.000000 FF7EC0685C5C64687C8C8C7470747874707088848884848C9484B0B4BCACB0FF7E60
00> [00:01:14.129,974] <inf> packet: lis3dhtr.accel.z 74127 100 1.000000 FF81ACF4FF82B0FF834CFF8418FF84F0FF85B4FF8650F0A88C5C50200CFF853CFF849CFF841010140C2034501C3C5C4C64FF84D0
00> [00:01:14.433,380] <inf> packet: lis3dhtr.accel.z 74430 100 1.000000 FF8084646CFF80E0ECFF81F0FF8290FF832CFF83C0C8848888A4C0E4F8FF8610EC8C74A4A4C01018FF8554FF8490FF8404FF84D0
00> --- 4 messages dropped ---
00> [00:01:14.653,930] <inf> packet: dps368.hpa 74652 64 0.010000 FFBC5CFFBA72FFBCF2FFBA72A2FFBB3EFFBDBEFFBD06FFBB3EFFBBF8FFBA86FFBB3EFFB9EEFFBCA0FFBBF8C4B28080804EB6FFBBA8FFBB10FFBBA8FFBC7280
00> [00:01:14.654,083] <inf> packet: dps368.temp 74652 8 0.001000 FFE1238085
00> [00:01:14.734,954] <inf> packet: lis3dhtr.accel.x 74734 100 1.000000 187C7C8884807488688860907878888C947C8894A4888868685C7878888CFF7EE4
00> [00:01:14.735,778] <inf> packet: lis3dhtr.accel.y 74734 100 1.000000 FF7E8C6868707478808C90A4A89C9C98988C706454D030345074907488746C6CFF7F18
00> [00:01:14.736,694] <inf> packet: lis3dhtr.accel.z 74734 100 1.000000 FF8374386C7C6C604444642828684C646058A0ACC0CCC8B4FF82C0DCA4CCF0F8FF84F4E4FF83B4
00> [00:01:15.038,940] <inf> packet: lis3dhtr.accel.y 75037 100 1.000000 FF7DD87C747C808C9CA49C8884788898909074B89CA49490988C745448782040
00> --- 1 messages dropped ---
00> [00:01:15.039,978] <inf> packet: lis3dhtr.accel.z 75037 100 1.000000 FF862CE8CCB4946024FF8628FF8584FF84B8FF8400FF83741C2C2830482038705C54649494C8F0FF82A0FF8368FF8558
00> [00:01:15.076,049] <inf> packet: dps368.hpa 75074 64 0.010000 FFBA9AFFBBA8FFBA84FFBB92808080FFBC5CFFBB92FFBC5CA46EFFBA9680FFBBF8FFBA96808006E680FFB9DAFFBA8280FFB9FAFFBA82FFBB90
00> [00:01:15.076,232] <inf> packet: dps368.temp 75074 8 0.001000 FFE10B986582
00> [00:01:15.341,461] <inf> packet: lis3dhtr.accel.x 75340 100 1.000000 646C647C8C849090809088847C748080788074887C808070807474747C68
00> [00:01:15.342,254] <inf> packet: lis3dhtr.accel.y 75340 100 1.000000 FF7DEC747C7884848884848484848C8488888C8C9C8098888C88848C90808CFF7E0C
00> [00:01:15.343,048] <inf> packet: lis3dhtr.accel.z 75340 100 1.000000 FF8480ACB4B8C4B0AC9C80745438302018243038344C28606C58686C746C98FF8558
00> [00:01:15.646,209] <inf> packet: lis3dhtr.accel.z 75643 100 1.000000 FF8204A4B8A4C8D8FF83A4FF8428FF84A8F4B8807068706C7474545444443840383C38304CFF8558
00> --- 4 messages dropped ---
00> [00:01:15.920,440] <inf> packet: dps368.hpa 75918 64 0.010000 FFB924FFB9CEFFBC4EFFBBC6FFBB2CFFB966FFBC4AFFBAB6FFBC4AFFB9ECFFBAE880FFBC901AFFB9EEFFBC90FFBDAEFFBB2EFFBCE4FFB9EEFFBB4AFFBD328080FFBA90FFBC8AFFBD32
00> [00:01:15.920,593] <inf> packet: dps368.temp 75918 8 0.001000 FFE0F698A3
00> [00:01:15.947,784] <inf> packet: lis3dhtr.accel.x 75946 100 1.000000 407C7C8C848C78849494988C8C8C8878706C6C74748078807C7C84986C88FF7EE4
00> [00:01:15.948,638] <inf> packet: lis3dhtr.accel.y 75946 100 1.000000 FF7E749C989488846050484C54607084887C7C788890909898A4A0A09498788CFF7F18
00> [00:01:15.949,584] <inf> packet: lis3dhtr.accel.z 75946 100 1.000000 FF81D4608090C8CCC8DCFF837CFF841CFF84CCFF855CE4C0A8785C301C202C140404182038884070FF83B4
00> [00:01:16.251,861] <inf> packet: lis3dhtr.accel.y 76250 100 1.000000 FF7EC0747C8874707450606C707C807878848088808C9090909084889080809C
00> --- 1 messages dropped ---
00> [00:01:16.252,685] <inf> packet: lis3dhtr.accel.z 76250 100 1.000000 FF81A88C98B0B4C0F4E8FF83D8F4BC9C8C746C5440585868746870707074747490FF81D8
00> [00:01:16.342,742] <inf> packet: dps368.hpa 76341 64 0.010000 FFBC9A10FFBA84FFBC5C80FFBBB4FFBCF4FFBA72FFBC2AFFBB5CFFBDFEFFBC48FFBD345EFFBC38FFB8ECFFBD12FFBC54FFBD1EA2FFBC864E80FFBCEC80FFBB3EFFBA30
00> [00:01:16.342,926] <inf> packet: dps368.temp 76341 8 0.001000 FFE10BA88E76
00> [00:01:16.554,199] <inf> packet: lis3dhtr.accel.x 76553 100 1.000000 4878747C6474888480787C7C7880887C807C8C80887C74847C787C7874FF7FE4
00> [00:01:16.554,992] <inf> packet: lis3dhtr.accel.y 76553 100 1.000000 FF7E707C7888747C807878707C88908C78686874809084908C8C8070746870FF7E98
00> [00:01:16.555,786] <inf> packet: lis3dhtr.accel.z 76553 100 1.000000 FF83848888AC88746460709C98947474707494A4A49474847C6C5C68707C88FF81D8
(Connection lost)
'''

class Sample:
    def __init__(self, timestamp, value):
        self.timestamp = timestamp
        self.value = value

class Channel:
    def __init__(self, name):
        self.name = name
        self.samples = []

channels = {}

lines = log.strip().split('\n')
packets = []
for line in lines:
    line = line.lower()
    if 'packet:' in line:
        packet_str = line.split('packet:')[1].strip()
        channel_name, end_timestamp, rate, step, packet = packet_str.split(' ', 4)

        if channel_name not in channels:
            channels[channel_name] = Channel(channel_name)

        c = channels[channel_name]

        end_timestamp = float(end_timestamp) / 1000.0
        rate = float(rate)
        step = float(step)

        samples = []

        last_s = 0
        i = 0
        n = 0
        while i < len(packet):
            byte_str = packet[i:i+2]
            byte_val = int(byte_str, 16)
            if byte_val == 0xff:
                s = int(packet[i+2:i+6], 16) - 32768
                i += 6
            else:
                s = last_s + (byte_val - 128)
                i += 2
            last_s = s

            samples.append(s * step)

        for n in range(len(samples)):
            timestamp = end_timestamp - (len(samples) + 1 + n) * (1.0 / rate)
            c.samples.append(Sample(timestamp, samples[n]))


for c in channels.values():
    c.samples.sort(key=lambda s: s.timestamp)

data = np.empty((0, 4), dtype=np.float32)

channel_accel_x = channels['lis3dhtr.accel.x']
channel_accel_y = channels['lis3dhtr.accel.y']
channel_accel_z = channels['lis3dhtr.accel.z']

x_i = 0
y_i = 0
z_i = 0

while x_i < len(channel_accel_x.samples) and y_i < len(channel_accel_y.samples) and z_i < len(channel_accel_z.samples):
    x = channel_accel_x.samples[x_i]
    y = channel_accel_y.samples[y_i]
    z = channel_accel_z.samples[z_i]
    timestamp = min(x.timestamp, y.timestamp, z.timestamp)
    data = np.vstack((data, np.array([[timestamp, x.value, y.value, z.value]], dtype=np.float32)))
    if x.timestamp == timestamp:
        x_i += 1
    if y.timestamp == timestamp:
        y_i += 1
    if z.timestamp == timestamp:
        z_i += 1

ax = plt.figure().add_subplot(projection='3d')

sc = ax.scatter(data[:, 1], data[:, 2], data[:, 3], c=data[:, 0], cmap='viridis', marker='o', label='accel data')

ax.legend()
ax.set_xlabel('X')
ax.set_ylabel('Y')
ax.set_zlabel('Z')

cbar = plt.colorbar(sc, ax=ax, pad=0.1)
cbar.set_label('Time (s)')

ax2 = plt.figure().add_subplot()
ax2.plot([s.timestamp for s in channels['dps368.temp'].samples],
            [s.value for s in channels['dps368.temp'].samples], 'ro', label='temperature')
ax2.set_xlabel('Time (s)')
ax2.set_ylabel('Temperature (Â°C)', color='r')
ax2.tick_params(axis='y', labelcolor='r')

ax3 = plt.figure().add_subplot()
ax3.plot([s.timestamp for s in channels['dps368.hpa'].samples],
            [s.value for s in channels['dps368.hpa'].samples], 'bo', label='pressure')
ax3.set_ylabel('Pressure (hPa)', color='b')
ax3.tick_params(axis='y', labelcolor='b')

ax.view_init(elev=20., azim=-35, roll=0)

plt.show()
